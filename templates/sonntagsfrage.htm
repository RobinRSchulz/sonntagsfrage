<!DOCTYPE html>
<html>
    <head>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js'></script>
    </head>
    <body>
        <h1>Sonntagsfrage-Daten-Test</h1>
        <h2>Current Data:</h2>
        <canvas id="chart" width="600" height="400"></canvas>
        <table>
            <thead>
                <caption>Server-filled table (test)</caption>
                <tr>
                    {% for party in parties %}
                    <td>{{party}}</td>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <!--todo: for each stuff-->
                {% for key in keysSorted %}
                    <tr>
                        {% for i in range(9) %}
                            <td>{{ jsonData["values"][key][i] }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </body>
    <script>
        var barData = {
            labels: [
                {% for party in parties %}
                "{{ party}}",
                {% endfor %}
            ],

            datasets : [{
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                data: [
                {% for i in range(9) %}
                    "{{ jsonData["values"][keysSorted[0]][i] }}",
                {% endfor %}

                ]
            }]
        };

        var mychart = document.getElementById("chart").getContext("2d");

        steps = 10
        max = {{40}}

        new Chart(mychart).Bar(barData, {
            scaleOverride: true,
            scaleSteps: steps,
            scaleStepWidth: Math.ceil(max / steps),
            scaleStartValue: 0,
            scaleShowVerticalLines: true,
            scaleShowGridLines : true,
            barShowStroke : true,
            scaleShowLabels: true
        });



    </script>
</html>